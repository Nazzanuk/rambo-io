<script type="text/ng-template" id="story.html">
    <div class="box">
        <div class="box-header">
            <!--<i class="fa fa-angle-right"></i> &nbsp;-->

            <div class="box-header-title" ng-click="toggleContent()">
                <i class="fa fa-angle-right" ng-show="!isContentOpen()"></i>
                <i class="fa fa-angle-down" ng-show="isContentOpen()"></i>
                <i class="fa fa-exclamation-circle" ng-show="story.isBlocked()" style="color: red"></i>
                {{story.getName()}}
            </div>
            <div class="box-color-2"></div>
            <i class="fa fa-bars fa-fw pull-right" ng-click="showMenu()" style="cursor: pointer"></i>

            <div class="box-menu" ng-show="isMenuOpen()">
                <div class="box-menu-header">
                    Menu
                    <i class="fa fa-times fa-fw pull-right" ng-click="hideMenu()"></i>
                </div>

                <ul>
                    <li>
                        <ul>
                            <li ng-repeat="user in getUsers() track by $index"
                                ng-click="story.addUser(user);hideMenu();"
                                    >{{user.getName()}}</li>
                        </ul>
                        Assign to...
                    </li>
                    <li ng-click="block()" ng-show="!story.isBlocked()">Block</li>
                    <li ng-click="unblock()" ng-show="story.isBlocked()">Unblock</li>
                    <li>Change Epic</li>
                    <li ng-click="setStatus('in progress')">Start</li>
                    <li ng-click="setStatus('backlog')">Send to backlog</li>
                    <li ng-click="setStatus('done')">Done!</li>
                    <li ng-click="deleteStory()">Delete</li>
                </ul>
            </div>
        </div>

        <div class="box-content" ng-show="isContentOpen()">
            <input ng-model="description" ng-change="setDescription()" ng-model-options="{ updateOn: 'blur' }"/>
        </div>
    </div>
</script>